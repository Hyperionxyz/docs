# 速率限制与冰箱功能使用指南

## 概述

Hyperion DEX 实施了速率限制和冰箱功能来保护平台和用户资产的安全。这些功能旨在防止大规模快速提取流动性，同时确保您的资金始终安全。

## 什么是速率限制？

速率限制是一种保护机制，限制在特定时间内可以从流动性池中提取的资产数量。这有助于：

- 防止恐慌性抛售和市场操纵
- 保护流动性提供者
- 维护市场稳定性
- 防止恶意攻击

### 速率限制的工作原理

系统使用"令牌桶"算法，就像一个会自动补充的水桶：

1. **初始容量**：每种资产都有一个初始的提取限额
2. **使用限额**：当您移除流动性时，会消耗限额
3. **自动补充**：限额会随时间自动恢复
4. **添加流动性加速恢复**：当您添加流动性时，限额会立即得到部分恢复

### 两种速率限制类型

#### 1. 全局速率限制（当前已启用）
- **作用范围**：限制整个平台所有用户对特定资产的总提取量
- **保护目标**：防止流动性池被快速耗尽，保护整个生态系统
- **当前限制**（24小时内）：
  - **APT**: 100万枚
  - **USDT**: 500万枚
  - **USDC**: 500万枚
- **注意**：这些数值会根据平台使用情况动态调整，未来将提供查询页面让用户实时了解当前阈值

#### 2. 用户速率限制（当前未启用）
- **作用范围**：限制单个用户地址对特定资产的提取量
- **保护目标**：防止单个用户进行异常大额操作
- **状态**：目前平台仅启用了全局限制，用户个人限制暂未开启

## 什么是冰箱功能？

当您的交易因超出速率限制而无法完成时，您的资金不会丢失，而是会被安全地存储在"冰箱"中。这确保了即使在速率限制触发时，您的资金也是安全的。

### 冰箱的工作流程

1. **触发条件**：当您尝试移除流动性但超出速率限制时
2. **自动存储**：您的资金会自动存入个人冰箱中
3. **冻结期**：资金会被冻结24小时（默认时间）
4. **领取资金**：冻结期结束后，您可以随时领取您的资金

## 如何使用这些功能

### 当触发速率限制时

如果您的交易触发了速率限制：

1. **不要担心**：您的资金是安全的
2. **查看冰箱**：您会在冰箱中看到一个新的"盒子"
3. **记录信息**：
   - 盒子ID
   - 冻结的代币数量
   - 解冻时间（通常是24小时后）

![触发速率限制提示](../.gitbook/assets/ratelimit/cn/rate-limit-triggered.png)
*图1: 当交易触发速率限制时的提示信息*

### 从冰箱领取资金

![冰箱页面入口](../.gitbook/assets/ratelimit/cn/fridge-entrance.png)
*图2: 从导航栏进入冰箱页面*

#### 方法一：领取所有可用资金
最简单的方式是一次性领取所有已解冻的资金：
```
点击"领取所有可用资金"按钮
```

![领取所有资金](../.gitbook/assets/ratelimit/cn/claim-all-funds.png)
*图3: 一键领取所有可用资金*

#### 方法二：领取特定盒子
如果您只想领取特定的资金：
```
1. 查看您的冰箱盒子列表
2. 找到已解冻的盒子（显示"可领取"状态）
3. 点击该盒子的"领取"按钮
```

![领取特定盒子](../.gitbook/assets/ratelimit/cn/claim-specific-box.png)
*图4: 查看盒子详情并领取特定资金*

### 查看冰箱状态

您可以随时查看：

- **所有冰箱盒子**：显示每个盒子的详细信息
- **解冻时间**：每个盒子何时可以领取
- **代币信息**：冻结的代币类型和数量
- **关联信息**：相关的流动性池和仓位ID

![冰箱状态总览](../.gitbook/assets/ratelimit/cn/fridge-overview.png)
*图5: 冰箱页面显示所有冻结资金的状态*

## 常见问题

### 1. 为什么我的交易被限制了？

由于目前仅启用了全局限制，您的交易被限制是因为：
- 整个平台在24小时内的资产提取量已接近或达到限制阈值
- 您尝试提取的金额会导致超出全局限制
- 例如：如果APT的24小时提取量已接近100万枚，您的大额提取可能会被限制

### 2. 我如何避免触发速率限制？

- **了解当前状态**：在大额操作前查看平台的剩余限额（功能即将推出）
- **分批操作**：将大额提取分成多个较小的交易
- **避开高峰期**：选择平台活动较少的时段进行操作
- **平衡操作**：添加流动性可以帮助恢复全局限额

### 3. 白名单用户有什么特权？

白名单用户（如做市商或合作伙伴）可以：
- 完全绕过速率限制
- 不受任何提取限制
- 无需使用冰箱功能

### 4. 冻结期可以缩短吗？

- 默认冻结期为24小时
- 普通用户无法更改冻结时间
- 紧急情况下，管理员可以协助处理

### 5. 我的资金在冰箱中安全吗？

是的，绝对安全：
- 资金存储在智能合约中
- 只有您本人可以在解冻后领取
- 所有操作都有事件记录
- 管理员仅在紧急情况下才能介入

### 6. 全局限制会影响所有操作吗？

不会，全局限制仅影响流动性移除操作：
- **不受影响**：交易（Swap）、添加流动性
- **受影响**：移除流动性、关闭仓位
- 这样设计是为了保护流动性池，同时不影响正常交易

### 7. 如何查看当前的全局限制状态？

- 未来将推出专门页面显示：
  - 各资产的24小时限制阈值
  - 当前已使用的额度
  - 剩余可用额度
  - 限额恢复倒计时

## 最佳实践

1. **了解限制**：熟悉当前的全局限制阈值（APT 100万、USDT/USDC 500万）
2. **分散操作**：避免一次性大额提取，特别是接近限制阈值时
3. **关注公告**：限制阈值可能会调整，请关注官方公告
4. **保持耐心**：24小时冻结期是为了保护整个生态系统
5. **合理规划**：如需大额提取，请提前规划并分批进行

## 总结

速率限制和冰箱功能是 Hyperion DEX 的重要安全特性。它们在保护平台稳定性的同时，确保您的资金始终安全可控。通过理解和正确使用这些功能，您可以更好地管理您的流动性操作，同时为整个生态系统的健康发展做出贡献。

记住：这些限制不是障碍，而是保护措施。它们确保了市场的长期稳定和所有参与者的利益。

---

## 截图说明

本文档需要添加以下截图到 `.gitbook/assets/ratelimit/cn/` 目录：

1. **rate-limit-triggered.png** - 触发速率限制时的提示
   - 显示交易被限制的提示信息
   - 显示资金已进入冰箱的通知

2. **fridge-entrance.png** - 冰箱功能入口
   - 显示导航栏或菜单中的冰箱入口
   - 突出显示如何访问冰箱页面

3. **claim-all-funds.png** - 领取所有资金界面
   - 显示"领取所有可用资金"按钮
   - 显示可领取的总金额

4. **claim-specific-box.png** - 单个盒子详情页面
   - 显示盒子的详细信息（ID、金额、解冻时间等）
   - 显示针对单个盒子的"领取"按钮

5. **fridge-overview.png** - 冰箱总览页面
   - 显示所有冰箱盒子的列表
   - 显示每个盒子的状态（冻结中/可领取）
   - 显示倒计时或解冻时间